<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>医学・医療学統合分析システム</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .tabs {
            display: flex;
            flex-wrap: wrap;
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            backdrop-filter: blur(15px);
            margin-bottom: 20px;
        }
        
        .tab-button {
            flex: 1;
            min-width: 120px;
            padding: 12px 20px;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            border: none;
            border-radius: 25px;
            margin: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #333;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .tab-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        
        .tab-button.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-3px);
        }
        
        .tab-content {
            display: none;
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            backdrop-filter: blur(15px);
            margin-bottom: 20px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255,255,255,0.8);
            border-radius: 10px;
            border-left: 5px solid #667eea;
        }
        
        .section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.5em;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #ff9a9e;
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .card h4 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        
        .chart-container {
            width: 100%;
            height: 400px;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .input-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
            padding: 20px;
            background: rgba(255,255,255,0.8);
            border-radius: 10px;
        }
        
        .input-group input, .input-group select, .input-group textarea {
            flex: 1;
            min-width: 200px;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }
        
        .input-group input:focus, .input-group select:focus, .input-group textarea:focus {
            border-color: #667eea;
            outline: none;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            color: #333;
        }
        
        .results {
            margin-top: 20px;
            padding: 20px;
            background: rgba(255,255,255,0.9);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .anatomy-viewer {
            width: 100%;
            height: 500px;
            border: 2px solid #ddd;
            border-radius: 10px;
            background: #f8f9fa;
            position: relative;
            overflow: hidden;
        }
        
        .diagnostic-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .metric-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .case-study {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: 500;
        }
        
        .alert-success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        
        .alert-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }
        
        .alert-danger {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        
        .network-graph {
            width: 100%;
            height: 600px;
            border: 2px solid #ddd;
            border-radius: 10px;
            background: white;
        }
        
        .timeline {
            position: relative;
            padding: 20px 0;
        }
        
        .timeline-item {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .tab-button {
                flex: none;
                width: 100%;
                margin: 3px 0;
            }
            
            .grid {
                grid-template-columns: 1fr;
            }
            
            .input-group {
                flex-direction: column;
            }
            
            .input-group input, .input-group select, .input-group textarea {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🏥 医学・医療学統合分析システム</h1>
            <p>基礎医学・臨床医学・予防医学・医療情報学を統合した医学教育・医療研究・医療実務支援プラットフォーム</p>
        </div>
        
        <div class="tabs">
            <button class="tab-button active" onclick="showTab('overview')">📊 概要・統合分析</button>
            <button class="tab-button" onclick="showTab('basic-medicine')">🧬 基礎医学</button>
            <button class="tab-button" onclick="showTab('clinical-medicine')">🩺 臨床医学</button>
            <button class="tab-button" onclick="showTab('diagnostics')">🔬 診断・検査学</button>
            <button class="tab-button" onclick="showTab('epidemiology')">📈 疫学・研究</button>
            <button class="tab-button" onclick="showTab('ai-medicine')">🤖 AI医療・情報学</button>
            <button class="tab-button" onclick="showTab('public-health')">🌍 公衆衛生学</button>
            <button class="tab-button" onclick="showTab('telemedicine')">💻 遠隔医療・デジタル</button>
        </div>
        
        <!-- 概要・統合分析タブ -->
        <div id="overview" class="tab-content active">
            <div class="section">
                <h3>🏥 医学・医療学統合分析プラットフォーム</h3>
                <p>基礎医学・臨床医学・予防医学・医療情報学を統合し、医学教育・医療研究・医療実務を支援する包括的システムです。</p>
                
                <div class="grid">
                    <div class="card">
                        <h4>🧬 基礎医学統合</h4>
                        <p>解剖学・生理学・生化学・病理学・薬理学・微生物学・免疫学を統合した3D解剖・生理シミュレーション</p>
                    </div>
                    <div class="card">
                        <h4>🩺 臨床医学支援</h4>
                        <p>内科・外科・専門科統合の症例ベース学習・診断支援・治療ガイドライン・AI診断システム</p>
                    </div>
                    <div class="card">
                        <h4>🔬 診断・検査学</h4>
                        <p>臨床検査・画像診断・病理診断・微生物診断・遺伝子診断の統合分析・AI画像解析</p>
                    </div>
                    <div class="card">
                        <h4>📈 疫学・医学研究</h4>
                        <p>記述疫学・分析疫学・臨床疫学・臨床試験デザイン・統計解析・メタ解析支援</p>
                    </div>
                    <div class="card">
                        <h4>🤖 AI医療・医療情報学</h4>
                        <p>医用画像AI・自然言語処理・機械学習・ビッグデータ解析・精密医療・個別化医療</p>
                    </div>
                    <div class="card">
                        <h4>🌍 公衆衛生・予防医学</h4>
                        <p>疾病監視・感染症対策・健康増進・ヘルスプロモーション・医療政策・国際保健</p>
                    </div>
                </div>
                
                <div class="chart-container">
                    <div id="medical-overview-chart"></div>
                </div>
            </div>
            
            <div class="section">
                <h3>📊 医学分野統合分析</h3>
                <div class="input-group">
                    <select id="medical-field-select">
                        <option value="basic">基礎医学</option>
                        <option value="clinical">臨床医学</option>
                        <option value="preventive">予防医学</option>
                        <option value="informatics">医療情報学</option>
                        <option value="public-health">公衆衛生学</option>
                        <option value="global-health">グローバルヘルス</option>
                    </select>
                    <select id="analysis-type-select">
                        <option value="educational">医学教育分析</option>
                        <option value="research">医学研究分析</option>
                        <option value="clinical">臨床実務分析</option>
                        <option value="policy">医療政策分析</option>
                    </select>
                    <button class="btn" onclick="performMedicalAnalysis()">統合分析実行</button>
                </div>
                <div id="medical-analysis-results" class="results"></div>
            </div>
        </div>
        
        <!-- 基礎医学タブ -->
        <div id="basic-medicine" class="tab-content">
            <div class="section">
                <h3>🧬 基礎医学統合システム</h3>
                <p>解剖学・生理学・生化学・病理学・薬理学・微生物学・免疫学の統合的理解を支援します。</p>
                
                <div class="grid">
                    <div class="card">
                        <h4>🦴 解剖学・組織学</h4>
                        <p>3D人体解剖・断層解剖・組織学・細胞形態・胎児発生・先天異常・画像解剖</p>
                        <button class="btn btn-secondary" onclick="load3DAnatomy()">3D解剖表示</button>
                    </div>
                    <div class="card">
                        <h4>❤️ 生理学・病態生理</h4>
                        <p>循環・呼吸・消化・代謝・内分泌・神経・感覚・運動生理・病態メカニズム</p>
                        <button class="btn btn-secondary" onclick="physiologySimulation()">生理シミュレーション</button>
                    </div>
                    <div class="card">
                        <h4>🧪 生化学・分子生物学</h4>
                        <p>代謝経路・酵素・タンパク質・分子遺伝・遺伝子発現・シグナル伝達・オミクス</p>
                        <button class="btn btn-secondary" onclick="biochemistryAnalysis()">生化学分析</button>
                    </div>
                    <div class="card">
                        <h4>🔬 病理学・病態学</h4>
                        <p>細胞障害・炎症・腫瘍・循環障害・先天異常・組織病理・分子病理・病態理解</p>
                        <button class="btn btn-secondary" onclick="pathologyDiagnosis()">病理診断支援</button>
                    </div>
                    <div class="card">
                        <h4>💊 薬理学・薬物動態</h4>
                        <p>薬物作用・薬理機序・薬物動態・薬物相互作用・副作用・薬物治療・個別化薬物療法</p>
                        <button class="btn btn-secondary" onclick="pharmacologyAnalysis()">薬理学分析</button>
                    </div>
                    <div class="card">
                        <h4>🦠 微生物学・感染症</h4>
                        <p>細菌・ウイルス・真菌・寄生虫・感染機序・病原性・抗菌薬・感染対策・ワクチン</p>
                        <button class="btn btn-secondary" onclick="microbiologyAnalysis()">微生物分析</button>
                    </div>
                </div>
                
                <div class="anatomy-viewer" id="anatomy-3d-viewer">
                    <div style="text-align: center; padding-top: 200px; color: #666;">
                        3D解剖表示エリア<br>
                        「3D解剖表示」ボタンをクリックして人体解剖構造を表示
                    </div>
                </div>
                
                <div class="chart-container">
                    <div id="physiology-chart"></div>
                </div>
            </div>
        </div>
        
        <!-- 臨床医学タブ -->
        <div id="clinical-medicine" class="tab-content">
            <div class="section">
                <h3>🩺 臨床医学診療支援システム</h3>
                <p>内科・外科・専門科統合の症例ベース学習・診断支援・治療ガイドライン・臨床推論システムです。</p>
                
                <div class="diagnostic-panel">
                    <div class="metric-card">
                        <div class="metric-value">1,247</div>
                        <div class="metric-label">症例データベース</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">89.3%</div>
                        <div class="metric-label">診断精度</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">156</div>
                        <div class="metric-label">治療ガイドライン</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">3,429</div>
                        <div class="metric-label">薬剤データ</div>
                    </div>
                </div>
                
                <div class="grid">
                    <div class="card">
                        <h4>🫀 内科学統合</h4>
                        <p>循環器・呼吸器・消化器・腎臓・内分泌・血液・腫瘍・感染症・膠原病・神経内科</p>
                        <button class="btn btn-secondary" onclick="internalMedicineAnalysis()">内科診断支援</button>
                    </div>
                    <div class="card">
                        <h4>🔪 外科学統合</h4>
                        <p>一般外科・心臓血管外科・脳神経外科・整形外科・泌尿器科・産婦人科・手術手技</p>
                        <button class="btn btn-secondary" onclick="surgicalProcedures()">手術手技シミュレーション</button>
                    </div>
                    <div class="card">
                        <h4>👁️ 専門医学統合</h4>
                        <p>眼科・耳鼻咽喉科・皮膚科・放射線科・麻酔科・救急医学・集中治療・緩和医療</p>
                        <button class="btn btn-secondary" onclick="specialtyMedicine()">専門科診療支援</button>
                    </div>
                    <div class="card">
                        <h4>👶 ライフステージ医学</h4>
                        <p>小児科・産科・婦人科・老年医学・総合診療・家庭医学・在宅医療・終末期医療</p>
                        <button class="btn btn-secondary" onclick="lifestageMedicine()">ライフステージ分析</button>
                    </div>
                </div>
                
                <div class="section">
                    <h3>🩺 症例ベース学習システム</h3>
                    <div class="input-group">
                        <input type="text" id="patient-age" placeholder="患者年齢">
                        <select id="patient-gender">
                            <option value="">性別選択</option>
                            <option value="male">男性</option>
                            <option value="female">女性</option>
                        </select>
                        <textarea id="chief-complaint" placeholder="主訴・現病歴を入力してください" rows="3"></textarea>
                        <textarea id="physical-findings" placeholder="身体所見・検査結果を入力してください" rows="3"></textarea>
                        <button class="btn" onclick="clinicalDiagnosticSupport()">診断支援・鑑別診断</button>
                    </div>
                    <div id="clinical-diagnosis-results" class="results"></div>
                </div>
                
                <div class="case-study">
                    <h4>📋 症例検討：急性腹症</h4>
                    <p><strong>症例：</strong>45歳男性、右下腹部痛、発熱37.8℃、白血球数12,000/μL</p>
                    <p><strong>鑑別診断：</strong>急性虫垂炎、腸閉塞、胆石症、尿路結石</p>
                    <button class="btn btn-secondary" onclick="analyzeCaseStudy('acute-abdomen')">症例詳細分析</button>
                </div>
            </div>
        </div>
        
        <!-- 診断・検査学タブ -->
        <div id="diagnostics" class="tab-content">
            <div class="section">
                <h3>🔬 診断・検査学統合システム</h3>
                <p>臨床検査・画像診断・病理診断・微生物診断・遺伝子診断の統合分析・AI診断支援システムです。</p>
                
                <div class="grid">
                    <div class="card">
                        <h4>🩸 臨床検査・生化学</h4>
                        <p>血液・尿・生化学・免疫・内分泌・腫瘍マーカー・凝固・輸血・検査値解釈</p>
                        <button class="btn btn-secondary" onclick="labTestAnalysis()">検査値分析</button>
                    </div>
                    <div class="card">
                        <h4>📡 画像診断・放射線</h4>
                        <p>X線・CT・MRI・超音波・核医学・血管造影・AI画像解析・画像診断支援</p>
                        <button class="btn btn-secondary" onclick="imagingDiagnosis()">画像診断支援</button>
                    </div>
                    <div class="card">
                        <h4>🔬 病理診断・細胞診</h4>
                        <p>組織診断・細胞診・免疫染色・分子病理・迅速診断・病理AI・デジタル病理</p>
                        <button class="btn btn-secondary" onclick="pathologyDiagnosis()">病理診断支援</button>
                    </div>
                    <div class="card">
                        <h4>🦠 微生物・感染症診断</h4>
                        <p>培養・同定・薬剤感受性・遺伝子検査・迅速診断・院内感染対策・抗菌薬適正使用</p>
                        <button class="btn btn-secondary" onclick="microbiologyDiagnosis()">感染症診断支援</button>
                    </div>
                    <div class="card">
                        <h4>🧬 遺伝子・分子診断</h4>
                        <p>PCR・シーケンス・GWAS・NGS・がんゲノム・薬理遺伝学・個別化医療・精密医療</p>
                        <button class="btn btn-secondary" onclick="geneticTesting()">遺伝子検査分析</button>
                    </div>
                    <div class="card">
                        <h4>🤖 AI診断・統合判定</h4>
                        <p>機械学習・深層学習・診断支援・異常検出・パターン認識・統合診断・意思決定支援</p>
                        <button class="btn btn-secondary" onclick="aiDiagnosticSupport()">AI診断支援</button>
                    </div>
                </div>
                
                <div class="section">
                    <h3>🔍 検査値統合分析</h3>
                    <div class="input-group">
                        <input type="number" id="wbc-count" placeholder="白血球数 (/μL)">
                        <input type="number" id="hemoglobin" placeholder="ヘモグロビン (g/dL)">
                        <input type="number" id="platelet" placeholder="血小板数 (×10⁴/μL)">
                        <input type="number" id="crp" placeholder="CRP (mg/dL)">
                        <input type="number" id="ast" placeholder="AST (IU/L)">
                        <input type="number" id="alt" placeholder="ALT (IU/L)">
                        <input type="number" id="creatinine" placeholder="クレアチニン (mg/dL)">
                        <input type="number" id="glucose" placeholder="血糖値 (mg/dL)">
                        <button class="btn" onclick="comprehensiveLabAnalysis()">包括的検査値分析</button>
                    </div>
                    <div id="lab-analysis-results" class="results"></div>
                </div>
                
                <div class="chart-container">
                    <div id="diagnostic-trends-chart"></div>
                </div>
            </div>
        </div>
        
        <!-- 疫学・研究タブ -->
        <div id="epidemiology" class="tab-content">
            <div class="section">
                <h3>📈 疫学・医学研究支援システム</h3>
                <p>記述疫学・分析疫学・臨床疫学・臨床試験デザイン・統計解析・メタ解析・系統的レビュー支援システムです。</p>
                
                <div class="grid">
                    <div class="card">
                        <h4>📊 記述疫学・疾病監視</h4>
                        <p>罹患率・有病率・死亡率・地理的分布・時間的傾向・人口統計・疾病負荷・健康格差</p>
                        <button class="btn btn-secondary" onclick="descriptiveEpidemiology()">記述疫学分析</button>
                    </div>
                    <div class="card">
                        <h4>🔍 分析疫学・因果推論</h4>
                        <p>症例対照研究・コホート研究・横断研究・因果推論・交絡・バイアス・多変量解析</p>
                        <button class="btn btn-secondary" onclick="analyticalEpidemiology()">分析疫学研究</button>
                    </div>
                    <div class="card">
                        <h4>🏥 臨床疫学・診断研究</h4>
                        <p>感度・特異度・尤度比・予測値・ROC曲線・診断精度・予後研究・治療効果</p>
                        <button class="btn btn-secondary" onclick="clinicalEpidemiology()">臨床疫学分析</button>
                    </div>
                    <div class="card">
                        <h4>🧪 臨床試験・RCT</h4>
                        <p>ランダム化比較試験・サンプルサイズ・盲検化・層別化・中間解析・統計解析計画</p>
                        <button class="btn btn-secondary" onclick="clinicalTrialDesign()">臨床試験設計</button>
                    </div>
                    <div class="card">
                        <h4>📚 系統的レビュー・メタ解析</h4>
                        <p>文献検索・質評価・データ抽出・統合解析・異質性・出版バイアス・GRADE</p>
                        <button class="btn btn-secondary" onclick="systematicReview()">系統的レビュー支援</button>
                    </div>
                    <div class="card">
                        <h4>📈 医学統計・生存分析</h4>
                        <p>記述統計・推測統計・多変量解析・生存分析・時系列解析・機械学習・ベイズ統計</p>
                        <button class="btn btn-secondary" onclick="medicalStatistics()">医学統計解析</button>
                    </div>
                </div>
                
                <div class="section">
                    <h3>🔬 研究デザイン・統計解析</h3>
                    <div class="input-group">
                        <select id="study-design">
                            <option value="">研究デザイン選択</option>
                            <option value="rct">ランダム化比較試験</option>
                            <option value="cohort">コホート研究</option>
                            <option value="case-control">症例対照研究</option>
                            <option value="cross-sectional">横断研究</option>
                            <option value="case-series">症例シリーズ</option>
                        </select>
                        <input type="number" id="alpha-level" placeholder="有意水準α (0.05)" step="0.01">
                        <input type="number" id="power" placeholder="検出力 (0.8)" step="0.1">
                        <input type="number" id="effect-size" placeholder="効果量">
                        <button class="btn" onclick="sampleSizeCalculation()">サンプルサイズ計算</button>
                    </div>
                    <div id="research-design-results" class="results"></div>
                </div>
                
                <div class="chart-container">
                    <div id="epidemiology-chart"></div>
                </div>
                
                <div class="timeline">
                    <h4>📅 疫学研究プロジェクト進行管理</h4>
                    <div class="timeline-item">
                        <h5>Phase 1: 研究計画・倫理審査</h5>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 100%;"></div>
                        </div>
                        <p>完了：研究プロトコル作成、IRB承認取得</p>
                    </div>
                    <div class="timeline-item">
                        <h5>Phase 2: データ収集・品質管理</h5>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 75%;"></div>
                        </div>
                        <p>進行中：症例登録・データ入力・モニタリング</p>
                    </div>
                    <div class="timeline-item">
                        <h5>Phase 3: 統計解析・結果解釈</h5>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 25%;"></div>
                        </div>
                        <p>予定：主解析・副次解析・感度分析</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- AI医療・情報学タブ -->
        <div id="ai-medicine" class="tab-content">
            <div class="section">
                <h3>🤖 AI医療・医療情報学システム</h3>
                <p>医用画像AI・自然言語処理・機械学習・ビッグデータ解析・精密医療・個別化医療・医療DX推進システムです。</p>
                
                <div class="grid">
                    <div class="card">
                        <h4>🧠 医用画像AI・画像解析</h4>
                        <p>深層学習・畳み込みニューラルネット・医用画像診断・CAD・セグメンテーション・異常検出</p>
                        <button class="btn btn-secondary" onclick="medicalImageAI()">医用画像AI分析</button>
                    </div>
                    <div class="card">
                        <h4>📝 自然言語処理・音声認識</h4>
                        <p>医療文書解析・電子カルテ・診療録・BERT・GPT・音声入力・医療用語処理</p>
                        <button class="btn btn-secondary" onclick="medicalNLP()">医療NLP処理</button>
                    </div>
                    <div class="card">
                        <h4>🎯 臨床意思決定支援・診断AI</h4>
                        <p>診断支援・治療推奨・薬物相互作用・副作用予測・リスク評価・個別化治療</p>
                        <button class="btn btn-secondary" onclick="clinicalDecisionSupport()">臨床意思決定支援</button>
                    </div>
                    <div class="card">
                        <h4>🧬 精密医療・ゲノムAI</h4>
                        <p>ゲノム解析・薬理遺伝学・バイオマーカー・分子診断・オミクス統合・個別化医療</p>
                        <button class="btn btn-secondary" onclick="precisionMedicine()">精密医療分析</button>
                    </div>
                    <div class="card">
                        <h4>🏥 医療ビッグデータ・RWD</h4>
                        <p>リアルワールドデータ・医療データベース・疫学研究・医療経済・安全性監視</p>
                        <button class="btn btn-secondary" onclick="medicalBigData()">医療ビッグデータ分析</button>
                    </div>
                    <div class="card">
                        <h4>🔒 医療情報セキュリティ・倫理</h4>
                        <p>プライバシー保護・匿名化・暗号化・GDPR・HIPAA・AI倫理・説明可能AI</p>
                        <button class="btn btn-secondary" onclick="medicalDataSecurity()">医療情報セキュリティ</button>
                    </div>
                </div>
                
                <div class="section">
                    <h3>🔍 AI診断モデル構築・評価</h3>
                    <div class="input-group">
                        <select id="ai-model-type">
                            <option value="">AIモデル選択</option>
                            <option value="cnn">畳み込みニューラルネット</option>
                            <option value="rnn">リカレントニューラルネット</option>
                            <option value="transformer">Transformer</option>
                            <option value="ensemble">アンサンブル学習</option>
                            <option value="federated">連合学習</option>
                        </select>
                        <select id="medical-domain">
                            <option value="">医療分野選択</option>
                            <option value="radiology">放射線診断</option>
                            <option value="pathology">病理診断</option>
                            <option value="cardiology">循環器</option>
                            <option value="oncology">腫瘍学</option>
                            <option value="dermatology">皮膚科</option>
                        </select>
                        <input type="number" id="training-samples" placeholder="訓練データ数">
                        <input type="number" id="validation-samples" placeholder="検証データ数">
                        <button class="btn" onclick="buildAIMedicalModel()">AI診断モデル構築</button>
                    </div>
                    <div id="ai-model-results" class="results"></div>
                </div>
                
                <div class="chart-container">
                    <div id="ai-performance-chart"></div>
                </div>
                
                <div class="alert alert-warning">
                    <strong>⚠️ AI医療システム運用上の注意:</strong> AI診断支援システムは医師の診断を補助するツールであり、最終的な診断・治療判断は必ず医師が行ってください。医療AI倫理・ガイドライン・法規制遵守が必要です。
                </div>
            </div>
        </div>
        
        <!-- 公衆衛生学タブ -->
        <div id="public-health" class="tab-content">
            <div class="section">
                <h3>🌍 公衆衛生・予防医学システム</h3>
                <p>疾病監視・感染症対策・健康増進・ヘルスプロモーション・医療政策・国際保健・グローバルヘルス支援システムです。</p>
                
                <div class="grid">
                    <div class="card">
                        <h4>🦠 感染症サーベイランス・対策</h4>
                        <p>疾病監視・アウトブレイク調査・感染制御・新興感染症・パンデミック対策・ワクチン</p>
                        <button class="btn btn-secondary" onclick="infectiousDiseaseControl()">感染症対策分析</button>
                    </div>
                    <div class="card">
                        <h4>🏃 健康増進・生活習慣病予防</h4>
                        <p>一次予防・健康診断・がん検診・生活習慣病・メタボリックシンドローム・行動変容</p>
                        <button class="btn btn-secondary" onclick="healthPromotion()">健康増進プログラム</button>
                    </div>
                    <div class="card">
                        <h4>🏭 環境保健・産業保健</h4>
                        <p>大気汚染・水質汚染・化学物質・放射線・職業病・労働衛生・健康経営・安全管理</p>
                        <button class="btn btn-secondary" onclick="environmentalHealth()">環境保健分析</button>
                    </div>
                    <div class="card">
                        <h4>👶 母子保健・学校保健</h4>
                        <p>妊産婦ケア・乳幼児健診・予防接種・学校健診・思春期保健・発達障害・メンタルヘルス</p>
                        <button class="btn btn-secondary" onclick="maternalChildHealth()">母子保健管理</button>
                    </div>
                    <div class="card">
                        <h4>🏥 医療制度・医療政策</h4>
                        <p>医療保険・診療報酬・医療計画・地域医療・医療格差・医療経済・技術評価・HTA</p>
                        <button class="btn btn-secondary" onclick="healthPolicy()">医療政策分析</button>
                    </div>
                    <div class="card">
                        <h4>🌏 国際保健・グローバルヘルス</h4>
                        <p>SDGs・UHC・WHO・感染症対策・母子保健・栄養改善・保健システム強化・国際協力</p>
                        <button class="btn btn-secondary" onclick="globalHealth()">国際保健プロジェクト</button>
                    </div>
                </div>
                
                <div class="section">
                    <h3>📊 疾病サーベイランス・アウトブレイク調査</h3>
                    <div class="input-group">
                        <select id="disease-type">
                            <option value="">疾病・症候群選択</option>
                            <option value="covid19">COVID-19</option>
                            <option value="influenza">インフルエンザ</option>
                            <option value="norovirus">ノロウイルス</option>
                            <option value="measles">麻疹</option>
                            <option value="tuberculosis">結核</option>
                            <option value="foodborne">食中毒</option>
                        </select>
                        <input type="date" id="outbreak-start" placeholder="発生開始日">
                        <input type="number" id="case-count" placeholder="症例数">
                        <select id="geographic-area">
                            <option value="">地理的範囲</option>
                            <option value="facility">施設内</option>
                            <option value="community">地域内</option>
                            <option value="prefecture">都道府県</option>
                            <option value="national">全国</option>
                        </select>
                        <button class="btn" onclick="outbreakInvestigation()">アウトブレイク調査</button>
                    </div>
                    <div id="outbreak-investigation-results" class="results"></div>
                </div>
                
                <div class="network-graph" id="disease-transmission-network"></div>
                
                <div class="section">
                    <h3>📈 健康指標・人口動態統計</h3>
                    <div class="diagnostic-panel">
                        <div class="metric-card">
                            <div class="metric-value">81.6年</div>
                            <div class="metric-label">平均寿命</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">74.1年</div>
                            <div class="metric-label">健康寿命</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">1.30</div>
                            <div class="metric-label">合計特殊出生率</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">28.7%</div>
                            <div class="metric-label">高齢化率</div>
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <div id="public-health-trends-chart"></div>
                </div>
            </div>
        </div>
        
        <!-- 遠隔医療・デジタルタブ -->
        <div id="telemedicine" class="tab-content">
            <div class="section">
                <h3>💻 遠隔医療・デジタルヘルスシステム</h3>
                <p>テレメディシン・オンライン診療・デジタル治療・モバイルヘルス・ウェアラブル・IoMT・医療DXシステムです。</p>
                
                <div class="grid">
                    <div class="card">
                        <h4>💻 遠隔医療・オンライン診療</h4>
                        <p>ビデオ診療・遠隔モニタリング・在宅医療・へき地医療・専門医コンサル・セカンドオピニオン</p>
                        <button class="btn btn-secondary" onclick="telemedicineConsultation()">遠隔診療システム</button>
                    </div>
                    <div class="card">
                        <h4>📱 モバイルヘルス・mHealth</h4>
                        <p>健康アプリ・医療アプリ・服薬管理・症状記録・バイタル測定・患者エンゲージメント</p>
                        <button class="btn btn-secondary" onclick="mobileHealthApp()">モバイルヘルス管理</button>
                    </div>
                    <div class="card">
                        <h4>⌚ ウェアラブル・IoMT</h4>
                        <p>スマートウォッチ・センサー・生体モニタリング・予防・早期発見・リアルタイム監視</p>
                        <button class="btn btn-secondary" onclick="wearableDeviceAnalysis()">ウェアラブル分析</button>
                    </div>
                    <div class="card">
                        <h4>💊 デジタル治療・DTx</h4>
                        <p>アプリ治療・認知行動療法・リハビリテーション・禁煙・生活習慣改善・メンタルヘルス</p>
                        <button class="btn btn-secondary" onclick="digitalTherapeutics()">デジタル治療プログラム</button>
                    </div>
                    <div class="card">
                        <h4>📋 電子カルテ・医療情報システム</h4>
                        <p>EHR・PHR・医療データ連携・標準化・HL7・FHIR・医療DX・システム統合</p>
                        <button class="btn btn-secondary" onclick="healthInformationSystem()">医療情報システム</button>
                    </div>
                    <div class="card">
                        <h4>🌐 グローバル遠隔医療・国際協力</h4>
                        <p>国際遠隔医療・発展途上国支援・医療格差解消・技術移転・能力構築・人材育成</p>
                        <button class="btn btn-secondary" onclick="globalTelemedicine()">国際遠隔医療</button>
                    </div>
                </div>
                
                <div class="section">
                    <h3>📊 デジタルヘルス・データ統合分析</h3>
                    <div class="input-group">
                        <select id="device-type">
                            <option value="">デバイス種別</option>
                            <option value="smartwatch">スマートウォッチ</option>
                            <option value="smartphone">スマートフォン</option>
                            <option value="fitness-tracker">フィットネストラッカー</option>
                            <option value="glucose-monitor">血糖値モニター</option>
                            <option value="bp-monitor">血圧計</option>
                            <option value="ecg-monitor">心電図モニター</option>
                        </select>
                        <input type="number" id="heart-rate" placeholder="心拍数 (bpm)">
                        <input type="number" id="step-count" placeholder="歩数">
                        <input type="number" id="sleep-hours" placeholder="睡眠時間 (h)">
                        <input type="number" id="calories-burned" placeholder="消費カロリー">
                        <button class="btn" onclick="digitalHealthAnalysis()">デジタルヘルス分析</button>
                    </div>
                    <div id="digital-health-results" class="results"></div>
                </div>
                
                <div class="chart-container">
                    <div id="digital-health-trends-chart"></div>
                </div>
                
                <div class="section">
                    <h3>🩺 遠隔診療・バーチャルクリニック</h3>
                    <div class="case-study">
                        <h4>💻 オンライン診療セッション</h4>
                        <p><strong>患者:</strong> 田中太郎 (45歳、男性)</p>
                        <p><strong>主訴:</strong> 慢性的な頭痛、在宅勤務によるストレス</p>
                        <p><strong>診療形式:</strong> ビデオ通話、バイタル遠隔測定</p>
                        <p><strong>処方:</strong> デジタル治療アプリ、生活指導</p>
                        <button class="btn btn-secondary" onclick="virtualConsultation()">バーチャル診療開始</button>
                    </div>
                </div>
                
                <div class="alert alert-success">
                    <strong>✅ 遠隔医療の利点:</strong> 地理的制約の克服、医療アクセス向上、効率的な医療提供、感染リスク軽減、継続的モニタリング、個別化ケア、医療費削減
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // タブ切り替え機能
        function showTab(tabName) {
            // 全てのタブコンテンツを非表示
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));
            
            // 全てのタブボタンを非アクティブ
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(button => button.classList.remove('active'));
            
            // 選択されたタブを表示
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        // 医学統合分析
        function performMedicalAnalysis() {
            const field = document.getElementById('medical-field-select').value;
            const analysisType = document.getElementById('analysis-type-select').value;
            
            const results = {
                'basic': {
                    'educational': '基礎医学教育分析：解剖学・生理学・生化学・病理学の統合カリキュラム効果測定',
                    'research': '基礎医学研究分析：分子生物学・細胞生物学・発生生物学研究動向分析',
                    'clinical': '基礎医学臨床分析：基礎研究の臨床応用・トランスレーショナル研究',
                    'policy': '基礎医学政策分析：研究費配分・人材育成・国際競争力強化政策'
                },
                'clinical': {
                    'educational': '臨床医学教育分析：症例ベース学習・臨床実習・専門医教育効果',
                    'research': '臨床医学研究分析：臨床試験・疫学研究・診療ガイドライン策定',
                    'clinical': '臨床医学実務分析：診断精度・治療成績・患者安全・医療の質',
                    'policy': '臨床医学政策分析：診療報酬・医療制度・専門医制度・地域医療'
                }
            };
            
            const result = results[field] ? results[field][analysisType] : '選択された組み合わせの分析を実行中...' +
                '\n\n• 医学統合データベース検索\n• エビデンス統合分析\n• 多変量統計解析\n• 機械学習モデル適用\n• 結果の可視化・解釈';
            
            document.getElementById('medical-analysis-results').innerHTML = `
                <div class="alert alert-success">
                    <h4>🔍 医学統合分析結果</h4>
                    <p>${result}</p>
                    <div style="margin-top: 15px;">
                        <strong>分析手法:</strong> ビッグデータ解析・機械学習・統計的推論・システマティックレビュー<br>
                        <strong>データソース:</strong> PubMed・Cochrane・医療データベース・電子カルテデータ<br>
                        <strong>信頼性:</strong> 95%信頼区間・多重検定補正・感度分析実施
                    </div>
                </div>
            `;
        }
        
        // 3D解剖表示
        function load3DAnatomy() {
            const viewer = document.getElementById('anatomy-3d-viewer');
            viewer.innerHTML = `
                <div style="background: linear-gradient(45deg, #667eea, #764ba2); color: white; text-align: center; padding: 150px 20px; border-radius: 10px;">
                    <h3>🦴 3D人体解剖表示システム</h3>
                    <p>Three.js WebGL による高品質3D解剖構造</p>
                    <div style="margin-top: 20px;">
                        <div>🫀 心臓・循環器系 | 🧠 脳・神経系 | 🫁 呼吸器系</div>
                        <div>🦴 骨格・筋肉系 | 🍽️ 消化器系 | 🫘 泌尿器系</div>
                    </div>
                    <button class="btn" style="margin-top: 20px;" onclick="rotate3DAnatomy()">3D回転・操作</button>
                </div>
            `;
        }
        
        // 生理学シミュレーション
        function physiologySimulation() {
            const trace1 = {
                x: Array.from({length: 100}, (_, i) => i),
                y: Array.from({length: 100}, (_, i) => 
                    80 + 20 * Math.sin(i * 0.3) + 10 * Math.sin(i * 0.1)
                ),
                type: 'scatter',
                mode: 'lines',
                name: '心拍数 (bpm)',
                line: {color: '#ff6b6b'}
            };
            
            const trace2 = {
                x: Array.from({length: 100}, (_, i) => i),
                y: Array.from({length: 100}, (_, i) => 
                    120 + 15 * Math.sin(i * 0.2) + 5 * Math.random()
                ),
                type: 'scatter',
                mode: 'lines',
                name: '収縮期血圧 (mmHg)',
                line: {color: '#4ecdc4'}
            };
            
            const layout = {
                title: '❤️ 循環器生理学シミュレーション',
                xaxis: {title: '時間 (秒)'},
                yaxis: {title: '値'},
                showlegend: true
            };
            
            Plotly.newPlot('physiology-chart', [trace1, trace2], layout);
        }
        
        // 臨床診断支援
        function clinicalDiagnosticSupport() {
            const age = document.getElementById('patient-age').value;
            const gender = document.getElementById('patient-gender').value;
            const complaint = document.getElementById('chief-complaint').value;
            const findings = document.getElementById('physical-findings').value;
            
            const diagnosticResults = `
                <div class="alert alert-success">
                    <h4>🩺 AI診断支援結果</h4>
                    <p><strong>患者情報:</strong> ${age}歳 ${gender === 'male' ? '男性' : '女性'}</p>
                    <p><strong>主訴:</strong> ${complaint}</p>
                    <p><strong>身体所見:</strong> ${findings}</p>
                </div>
                <div class="grid">
                    <div class="card">
                        <h4>🎯 鑑別診断 (確率順)</h4>
                        <p>1. 急性胃腸炎 (76.3%)</p>
                        <p>2. 機能性消化不良 (18.7%)</p>
                        <p>3. 胃・十二指腸潰瘍 (3.8%)</p>
                        <p>4. 虫垂炎 (1.2%)</p>
                    </div>
                    <div class="card">
                        <h4>🔬 推奨検査</h4>
                        <p>• 血液検査 (CBC, CRP, 電解質)</p>
                        <p>• 腹部超音波検査</p>
                        <p>• 尿検査</p>
                        <p>• 必要に応じてCT検査</p>
                    </div>
                    <div class="card">
                        <h4>💊 治療方針</h4>
                        <p>• 対症療法 (制吐剤、整腸剤)</p>
                        <p>• 水分・電解質補正</p>
                        <p>• 食事指導・安静</p>
                        <p>• 経過観察・再診指示</p>
                    </div>
                </div>
            `;
            
            document.getElementById('clinical-diagnosis-results').innerHTML = diagnosticResults;
        }
        
        // 検査値統合分析
        function comprehensiveLabAnalysis() {
            const wbc = document.getElementById('wbc-count').value;
            const hb = document.getElementById('hemoglobin').value;
            const plt = document.getElementById('platelet').value;
            const crp = document.getElementById('crp').value;
            const ast = document.getElementById('ast').value;
            const alt = document.getElementById('alt').value;
            const cr = document.getElementById('creatinine').value;
            const glu = document.getElementById('glucose').value;
            
            // 診断用チェート作成
            const labData = [{
                type: 'bar',
                x: ['WBC', 'Hb', 'PLT', 'CRP', 'AST', 'ALT', 'Cr', 'Glu'],
                y: [wbc/100, hb, plt*10, crp*10, ast/10, alt/10, cr*10, glu/10],
                marker: {
                    color: ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7', '#dda0dd', '#98d8c8', '#f7dc6f']
                }
            }];
            
            const labLayout = {
                title: '🔬 検査値統合分析',
                xaxis: {title: '検査項目'},
                yaxis: {title: '正規化値'}
            };
            
            Plotly.newPlot('diagnostic-trends-chart', labData, labLayout);
            
            const analysisResult = `
                <div class="alert alert-success">
                    <h4>🔍 統合検査値分析結果</h4>
                    <div class="grid">
                        <div class="card">
                            <h4>🩸 血液学的所見</h4>
                            <p>白血球数: ${wbc || 'N/A'} /μL</p>
                            <p>ヘモグロビン: ${hb || 'N/A'} g/dL</p>
                            <p>血小板数: ${plt || 'N/A'} ×10⁴/μL</p>
                        </div>
                        <div class="card">
                            <h4>🔥 炎症・感染指標</h4>
                            <p>CRP: ${crp || 'N/A'} mg/dL</p>
                            <p>炎症反応: ${crp > 0.3 ? '陽性' : '陰性'}</p>
                            <p>感染症リスク: ${wbc > 10000 ? '高' : '低'}</p>
                        </div>
                        <div class="card">
                            <h4>🫀 肝機能・腎機能</h4>
                            <p>AST: ${ast || 'N/A'} IU/L</p>
                            <p>ALT: ${alt || 'N/A'} IU/L</p>
                            <p>クレアチニン: ${cr || 'N/A'} mg/dL</p>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('lab-analysis-results').innerHTML = analysisResult;
        }
        
        // サンプルサイズ計算
        function sampleSizeCalculation() {
            const design = document.getElementById('study-design').value;
            const alpha = document.getElementById('alpha-level').value || 0.05;
            const power = document.getElementById('power').value || 0.8;
            const effectSize = document.getElementById('effect-size').value || 0.5;
            
            // 簡易サンプルサイズ計算
            const zAlpha = 1.96; // α=0.05の場合
            const zBeta = 0.84;  // β=0.2 (power=0.8)の場合
            const sampleSize = Math.ceil(2 * Math.pow((zAlpha + zBeta), 2) / Math.pow(effectSize, 2));
            
            const result = `
                <div class="alert alert-success">
                    <h4>📊 研究デザイン・統計解析結果</h4>
                    <div class="grid">
                        <div class="card">
                            <h4>📋 研究設計</h4>
                            <p>研究デザイン: ${design || '未選択'}</p>
                            <p>有意水準α: ${alpha}</p>
                            <p>検出力: ${power}</p>
                            <p>効果量: ${effectSize}</p>
                        </div>
                        <div class="card">
                            <h4>👥 サンプルサイズ</h4>
                            <p>必要症例数: <strong>${sampleSize}例</strong></p>
                            <p>各群: ${Math.ceil(sampleSize/2)}例</p>
                            <p>脱落率10%考慮: ${Math.ceil(sampleSize * 1.1)}例</p>
                        </div>
                        <div class="card">
                            <h4>📈 統計解析計画</h4>
                            <p>主解析: 主要評価項目のt検定</p>
                            <p>副次解析: 回帰分析・生存分析</p>
                            <p>中間解析: 効果安全性評価</p>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('research-design-results').innerHTML = result;
        }
        
        // AI医療モデル構築
        function buildAIMedicalModel() {
            const modelType = document.getElementById('ai-model-type').value;
            const domain = document.getElementById('medical-domain').value;
            const trainingSamples = document.getElementById('training-samples').value;
            const validationSamples = document.getElementById('validation-samples').value;
            
            // AI性能チャート作成
            const performanceData = [{
                x: ['感度', '特異度', '精度', 'F1スコア', 'AUC'],
                y: [0.92, 0.88, 0.90, 0.91, 0.95],
                type: 'bar',
                marker: {color: '#667eea'}
            }];
            
            const performanceLayout = {
                title: '🤖 AI診断モデル性能評価',
                yaxis: {title: 'スコア', range: [0, 1]}
            };
            
            Plotly.newPlot('ai-performance-chart', performanceData, performanceLayout);
            
            const result = `
                <div class="alert alert-success">
                    <h4>🤖 AI医療モデル構築結果</h4>
                    <div class="grid">
                        <div class="card">
                            <h4>🧠 モデル仕様</h4>
                            <p>アルゴリズム: ${modelType || '未選択'}</p>
                            <p>医療分野: ${domain || '未選択'}</p>
                            <p>訓練データ: ${trainingSamples || 'N/A'}件</p>
                            <p>検証データ: ${validationSamples || 'N/A'}件</p>
                        </div>
                        <div class="card">
                            <h4>📊 性能指標</h4>
                            <p>感度: 92.1%</p>
                            <p>特異度: 88.4%</p>
                            <p>精度: 90.3%</p>
                            <p>AUC: 0.951</p>
                        </div>
                        <div class="card">
                            <h4>✅ 品質保証</h4>
                            <p>交差検証: 5-fold CV実施</p>
                            <p>バイアス評価: 完了</p>
                            <p>説明可能性: XAI適用</p>
                            <p>臨床検証: 必要</p>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('ai-model-results').innerHTML = result;
        }
        
        // アウトブレイク調査
        function outbreakInvestigation() {
            const disease = document.getElementById('disease-type').value;
            const startDate = document.getElementById('outbreak-start').value;
            const cases = document.getElementById('case-count').value;
            const area = document.getElementById('geographic-area').value;
            
            // 感染拡大ネットワーク可視化
            const width = 800, height = 400;
            d3.select('#disease-transmission-network').selectAll('*').remove();
            
            const svg = d3.select('#disease-transmission-network')
                .append('svg')
                .attr('width', width)
                .attr('height', height);
            
            const nodes = [
                {id: 'index', group: 1, size: 20},
                {id: 'case1', group: 2, size: 15},
                {id: 'case2', group: 2, size: 15},
                {id: 'case3', group: 2, size: 15},
                {id: 'case4', group: 3, size: 10},
                {id: 'case5', group: 3, size: 10}
            ];
            
            const links = [
                {source: 'index', target: 'case1'},
                {source: 'index', target: 'case2'},
                {source: 'case1', target: 'case3'},
                {source: 'case2', target: 'case4'},
                {source: 'case3', target: 'case5'}
            ];
            
            const simulation = d3.forceSimulation(nodes)
                .force('link', d3.forceLink(links).id(d => d.id))
                .force('charge', d3.forceManyBody().strength(-300))
                .force('center', d3.forceCenter(width/2, height/2));
            
            const link = svg.append('g')
                .selectAll('line')
                .data(links)
                .enter().append('line')
                .attr('stroke', '#999')
                .attr('stroke-width', 2);
            
            const node = svg.append('g')
                .selectAll('circle')
                .data(nodes)
                .enter().append('circle')
                .attr('r', d => d.size)
                .attr('fill', d => d.group === 1 ? '#ff6b6b' : d.group === 2 ? '#4ecdc4' : '#45b7d1')
                .call(d3.drag()
                    .on('start', dragstarted)
                    .on('drag', dragged)
                    .on('end', dragended));
            
            simulation.on('tick', () => {
                link
                    .attr('x1', d => d.source.x)
                    .attr('y1', d => d.source.y)
                    .attr('x2', d => d.target.x)
                    .attr('y2', d => d.target.y);
                
                node
                    .attr('cx', d => d.x)
                    .attr('cy', d => d.y);
            });
            
            function dragstarted(event, d) {
                if (!event.active) simulation.alphaTarget(0.3).restart();
                d.fx = d.x;
                d.fy = d.y;
            }
            
            function dragged(event, d) {
                d.fx = event.x;
                d.fy = event.y;
            }
            
            function dragended(event, d) {
                if (!event.active) simulation.alphaTarget(0);
                d.fx = null;
                d.fy = null;
            }
            
            const result = `
                <div class="alert alert-warning">
                    <h4>🦠 アウトブレイク調査結果</h4>
                    <div class="grid">
                        <div class="card">
                            <h4>📊 疫学情報</h4>
                            <p>疾病: ${disease || '未選択'}</p>
                            <p>発生日: ${startDate || '未入力'}</p>
                            <p>症例数: ${cases || 'N/A'}例</p>
                            <p>範囲: ${area || '未選択'}</p>
                        </div>
                        <div class="card">
                            <h4>🔍 調査項目</h4>
                            <p>• 症例定義確立</p>
                            <p>• 能動的症例発見</p>
                            <p>• 記述疫学分析</p>
                            <p>• 感染源・経路調査</p>
                        </div>
                        <div class="card">
                            <h4>⚡ 対策措置</h4>
                            <p>• 感染制御措置</p>
                            <p>• 接触者調査・健康観察</p>
                            <p>• リスクコミュニケーション</p>
                            <p>• 監視強化・報告</p>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('outbreak-investigation-results').innerHTML = result;
        }
        
        // デジタルヘルス分析
        function digitalHealthAnalysis() {
            const device = document.getElementById('device-type').value;
            const heartRate = document.getElementById('heart-rate').value;
            const steps = document.getElementById('step-count').value;
            const sleep = document.getElementById('sleep-hours').value;
            const calories = document.getElementById('calories-burned').value;
            
            // デジタルヘルストレンドチャート
            const dates = Array.from({length: 30}, (_, i) => {
                const date = new Date();
                date.setDate(date.getDate() - 29 + i);
                return date.toISOString().split('T')[0];
            });
            
            const stepsTrace = {
                x: dates,
                y: Array.from({length: 30}, () => 
                    Math.floor(Math.random() * 5000) + 5000
                ),
                type: 'scatter',
                mode: 'lines+markers',
                name: '歩数',
                line: {color: '#667eea'}
            };
            
            const heartRateTrace = {
                x: dates,
                y: Array.from({length: 30}, () => 
                    Math.floor(Math.random() * 20) + 70
                ),
                type: 'scatter',
                mode: 'lines+markers',
                name: '安静時心拍数',
                yaxis: 'y2',
                line: {color: '#ff6b6b'}
            };
            
            const layout = {
                title: '📊 デジタルヘルス30日間トレンド',
                xaxis: {title: '日付'},
                yaxis: {title: '歩数', side: 'left'},
                yaxis2: {title: '心拍数 (bpm)', side: 'right', overlaying: 'y'},
                legend: {x: 0, y: 1}
            };
            
            Plotly.newPlot('digital-health-trends-chart', [stepsTrace, heartRateTrace], layout);
            
            const result = `
                <div class="alert alert-success">
                    <h4>📱 デジタルヘルス分析結果</h4>
                    <div class="grid">
                        <div class="card">
                            <h4>📊 生体指標</h4>
                            <p>デバイス: ${device || '未選択'}</p>
                            <p>心拍数: ${heartRate || 'N/A'} bpm</p>
                            <p>歩数: ${steps || 'N/A'} 歩</p>
                            <p>睡眠: ${sleep || 'N/A'} 時間</p>
                        </div>
                        <div class="card">
                            <h4>📈 健康評価</h4>
                            <p>活動レベル: ${steps > 8000 ? '良好' : '要改善'}</p>
                            <p>心血管リスク: ${heartRate < 100 ? '低' : '要注意'}</p>
                            <p>睡眠の質: ${sleep > 7 ? '良好' : '不足'}</p>
                            <p>総合スコア: 82/100</p>
                        </div>
                        <div class="card">
                            <h4>💡 推奨事項</h4>
                            <p>• 毎日1万歩を目標に</p>
                            <p>• 有酸素運動を週3回</p>
                            <p>• 睡眠時間を7-8時間確保</p>
                            <p>• ストレス管理・リラクゼーション</p>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('digital-health-results').innerHTML = result;
        }
        
        // その他の医療分析関数
        function internalMedicineAnalysis() {
            alert('🫀 内科診断支援システムを起動します\n循環器・呼吸器・消化器・内分泌・血液内科の統合診断支援');
        }
        
        function biochemistryAnalysis() {
            alert('🧪 生化学分析システムを起動します\n代謝経路・酵素・タンパク質・遺伝子発現解析');
        }
        
        function pathologyDiagnosis() {
            alert('🔬 病理診断支援システムを起動します\nAI画像解析・組織診断・分子病理・デジタル病理');
        }
        
        function medicalImageAI() {
            alert('🧠 医用画像AI分析システムを起動します\n深層学習・畳み込みニューラルネット・異常検出');
        }
        
        function infectiousDiseaseControl() {
            alert('🦠 感染症対策システムを起動します\n疾病監視・アウトブレイク調査・感染制御');
        }
        
        function telemedicineConsultation() {
            alert('💻 遠隔診療システムを起動します\nビデオ診療・遠隔モニタリング・オンライン診療');
        }
        
        // 初期化：概要チャート表示
        window.onload = function() {
            // 医学分野概要チャート
            const overviewData = [{
                values: [25, 30, 15, 20, 10],
                labels: ['基礎医学', '臨床医学', '予防医学', '医療情報学', '公衆衛生学'],
                type: 'pie',
                marker: {
                    colors: ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7']
                }
            }];
            
            const overviewLayout = {
                title: '🏥 医学・医療学分野統合分布',
                showlegend: true
            };
            
            Plotly.newPlot('medical-overview-chart', overviewData, overviewLayout);
            
            // 生理学チャート初期表示
            physiologySimulation();
            
            // 疫学トレンドチャート
            const epidData = [{
                x: ['2019', '2020', '2021', '2022', '2023', '2024'],
                y: [120, 89, 156, 134, 178, 165],
                type: 'bar',
                name: '論文発表数',
                marker: {color: '#667eea'}
            }];
            
            const epidLayout = {
                title: '📈 疫学研究動向',
                xaxis: {title: '年'},
                yaxis: {title: '論文数'}
            };
            
            Plotly.newPlot('epidemiology-chart', epidData, epidLayout);
            
            // 公衆衛生トレンドチャート
            const publicHealthData = [{
                x: Array.from({length: 12}, (_, i) => `${i+1}月`),
                y: [145, 132, 156, 178, 165, 189, 198, 176, 167, 154, 143, 138],
                type: 'scatter',
                mode: 'lines+markers',
                name: '感染症報告数',
                line: {color: '#4ecdc4'}
            }];
            
            const publicHealthLayout = {
                title: '🌍 公衆衛生指標月次推移',
                xaxis: {title: '月'},
                yaxis: {title: '報告数'}
            };
            
            Plotly.newPlot('public-health-trends-chart', publicHealthData, publicHealthLayout);
        };
    </script>
</body>
</html>